CREATE TABLE UTENTI(
CF CHAR(16) PRIMARY KEY,
NOME VARCHAR2(50) NOT NULL,
COGNOME VARCHAR2(50) NOT NULL,
INDIRIZZO VARCHAR2(50) NOT NULL,
USERNAME VARCHAR2(50) NOT NULL,
PASSWORD VARCHAR2(50) NOT NULL,
EMAIL VARCHAR2(50) NOT NULL,
TIPOACCOUNT VARCHAR2(50) NOT NULL
);

CREATE TABLE PLAYLIST(
ID VARCHAR(50) NOT NULL AUTO_INCREMENT
NOMEPLAYLIST VARCHAR2(50) PRIMARY KEY ,
UTENTE CHAR(16) PRIMARY KEY,
FOREIGN KEY (UTENTE) REFERENCES UTENTI(CF)
);

CREATE TABLE BRANI(
CODICEBRANO VARCHAR(50) NOT NULL AUTO_INCREMENT
TITOLO VARCHAR2(50) PRIMARY KEY ,
AUTORE VARCHAR2(50) PRIMARY KEY,
FILERIPRODUZIONE VARCHAR2(50) NOT NULL,
DURATA INTEGER NOT NULL,
FOREIGN KEY (AUTORE) REFERENCES AUTORI(CODICE)
);

CREATE TABLE VALUTAZIONI(
UTENTE CHAR(16) PRIMARY KEY ,
BRANO VARCHAR2(50) PRIMARY KEY,
AUTORE VARCHAR2(50) PRIMARY KEY ,
VALOREPUNTEGGIO INTEGER NOT NULL,
NUMEROVOLTE INTEGER NOT NULL,
FOREIGN KEY (UTENTE) REFERENCES UTENTI(CF),
FOREIGN KEY (BRANO) REFERENCES BRANI(CODICEBRANO),
FOREIGN KEY (AUTORE) REFERENCES AUTORI(CODICE),
);

CREATE TABLE GRUPPI(
NOMEGRUPPO VARCHAR2(50) PRIMARY KEY ,
AUTORE VARCHAR2(50) PRIMARY KEY,
FOREIGN KEY (AUTORE) REFERENCES AUTORI(CODICE)
);

CREATE TABLE AUTORE(
CODICE VARCHAR2(50) PRIMARY KEY ,
BIOGRAFIA VARCHAR2(50) 
);

CREATE TABLE SINGOLIAUTORI(
NOME VARCHAR2(50) PRIMARY KEY ,
COGNOME VARCHAR2(50) PRIMARY KEY ,
AUTORE VARCHAR2(50) PRIMARY KEY,
FOREIGN KEY (AUTORE) REFERENCES AUTORI(CODICE)
);

CREATE TABLE AFFERENZABRANI(
IDPLAYLIST VARCHAR(50) PRIMARY KEY,
CODICEBRANO VARCHAR2(5) PRIMARY KEY
FOREIGN KEY (IDPLAYLIST) REFERENCES PLAYLIST(ID)
FOREIGN KEY (CODICEBRANO) REFERENCES BRANI(CODICE)
}
///H2 NON FA METTERE PIU CHIAVI PRIMARIE E DEVO USARE L'ALTER////
ALTER TABLE PLAYLIST ADD PRIMARY KEY (NOMEPLAYLIST, UTENTE);

CREATE TABLE AUTORE(
CODICE VARCHAR2(50) PRIMARY KEY ,
BIOGRAFIA VARCHAR2(50) 
);

***********query***************
SELECT BRANO FROM VALUTAZIONI ORDER BY NUMEROVOLTE DESC
SELECT BRANO FROM VALUTAZIONI ORDER BY VALOREPUNTEGGIO DESC
SELECT * FROM VALUTAZIONI  WHERE UTENTE='1212121212121212' ORDER BY NUMEROVOLTE DESC

SELECT *FROM VALUTAZIONI  RIGHT JOIN BRANI ON CODICEBRANO=BRANO  WHERE UTENTE=1 ORDER BY VALOREPUNTEGGIO DESC

prep2: INSERT INTO PLAYLIST(ID,NOMEPLAYLIST,UTENTE) VALUES(?,?,?) {1: '2', 2: '1', 3: '1'}
prep3: INSERT INTO AFFERENZABRANI(IDPLAYLIST,CODICEBRANO) VALUES(?,?) {1: '2', 2: '1'}
SELECT ID FROM PLAYLIST WHERE ((UTENTE=1)AND(NOMEPLAYLIST='LEOPLAY'))

INSERT INTO UTENTI(CF,NOME,COGNOME,INDIRIZZO,USERNAME,PASSWORD,EMAIL,TIPOACCOUNT)VALUES()
INSERT INTO AUTORE(CODICE,BIOGRAFIA)VALUES()
INSERT INTO SINGOLIAUTORI(NOME,COGNOME,AUTORE)VALUES()
INSERT INTO GRUPPI (NOMEGRUPPO,AUTORE)
INSERT INTO BRANI (CODICEBRANO,TITOLO,AUTORE,FILERIPRODUZIONE,DURATA)VALUES
INSERT INTO PLAYLIST(NOMEPLAYLIST,UTENTE) VALUES(?,?)
INSERT INTO VALUTAZIONI (UTENTE,BRANO,AUTORE,VALOREPUNTEGGIO,NUMEROVOLTE)VALUES
INSERT INTO AFFERENZABRANI(IDPLAYLIST,CODICEBRANO)
NPLGPP95R06F839E'
//alcuni insert

INSERT INTO UTENTI(CF,NOME,COGNOME,INDIRIZZO,USERNAME,PASSWORD,EMAIL,TIPOACCOUNT)VALUES('NPLGPP95R06F839E','Giuseppe,Napolano'',Via Marano','peppenapo','ingegneria','peppenapo@live.it',STANDARD)
INSERT INTO AUTORE(CODICE,BIOGRAFIA)VALUES('04', 'la lettera s non è il mio forte')
INSERT INTO SINGOLIAUTORI(NOME,COGNOME,AUTORE)VALUES('Nino ',D'angelo','04')

INSERT INTO BRANI (CODICEBRANO,TITOLO,AUTORE,FILERIPRODUZIONE,DURATA)VALUES('02','Popcorn e patatine','04','MP3',3)
INSERT INTO VALUTAZIONI (UTENTE,BRANO,AUTORE,VALOREPUNTEGGIO,NUMEROVOLTE)VALUES('NPLGPP95R06F839E'','02','10','3')
